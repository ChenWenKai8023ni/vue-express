(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5899747c"],{4484:function(t,e,s){},"4b2b":function(t,e,s){"use strict";var a=s("4484"),n=s.n(a);n.a},dd7b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("form",{staticClass:"login-form"},[s("h2",[t._v("登 录")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:t.hint},domProps:{value:t.email},on:{keyup:t.show,input:function(e){e.target.composing||(t.email=e.target.value)}}}),null!==t.msg?s("p",[t._v(t._s(t.msg))]):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],attrs:{type:"password",placeholder:t.hints,autocomplete:"on"},domProps:{value:t.pwd},on:{keyup:t.show,input:function(e){e.target.composing||(t.pwd=e.target.value)}}}),null!==t.msgs?s("p",[t._v(t._s(t.msgs))]):t._e(),s("button",{on:{click:function(e){return e.preventDefault(),t.login(e)}}},[t._v("登录")]),s("router-link",{attrs:{to:"/register"}},[t._v("还没账号去注册")])],1)])},n=[],o=(s("b0c0"),{data:function(){return{email:"",pwd:"",hint:"用户邮箱",hints:"密码",msg:null,msgs:null}},methods:{show:function(){this.msg=null,this.msgs=null},login:function(){var t=this;""!=this.pwd&&""!=this.name?this.$axios({method:"get",url:"http://127.0.0.1:3000/users/login",params:{email:this.email,pwd:this.pwd}}).then((function(e){if(e.data.user.data.token&&(window.localStorage.setItem("token",e.data.user.data.token),window.sessionStorage.setItem("isLogin",!0),window.sessionStorage.setItem("username",e.data.user.data.name)),200==e.data.user.status)t.$store.commit("GET_USER",e.data.user.data),sessionStorage.setItem("user",JSON.stringify(e.data.user.data)),t.$router.go(-1);else{if(501==e.data.user.status)return t.msgs="用户密码不正确";if(500==e.data.user.status)return t.msg="用户名错误"}})):alert("邮箱或密码不能为空")}},mounted:function(){},beforeRouteLeave:function(t,e,s){"/register"===t.path?s("/"):s()}}),i=o,r=(s("4b2b"),s("2877")),u=Object(r["a"])(i,a,n,!1,null,"38d7a2c8",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-5899747c.6dbadad7.js.map